pre-commit:
  parallel: true
  commands:
    fmt-check:
      root: "terraform/"
      glob: "*.tf"
      run: terraform fmt -check
      fail_text: "Run 'mise run tf fmt' to fix formatting"
    validate:
      root: "terraform/"
      glob: "*.tf"
      run: terraform validate
    lint:
      root: "terraform/"
      glob: "*.tf"
      run: tflint
    gitleaks:
      run: gitleaks protect --staged

commit-msg:
  commands:
    conventional:
      run: 'grep -qE "^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?!?: .+" {1}'
      fail_text: "Commit message must follow conventional commits: type(scope): message"
